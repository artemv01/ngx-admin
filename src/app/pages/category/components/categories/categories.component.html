<app-layout>
    <mat-toolbar class="page-header">
        <h1>Categories</h1>
    </mat-toolbar>
    <!--  <app-items-table [bulkActions]="bulkActions"
        itemsType="products"><button [routerLink]="['/dashboard', 'products', 'add']"
            mat-flat-button
            class="icon-button"
            color="primary"
            type="submit">
            <mat-icon>add</mat-icon>Add New
        </button></app-items-table> -->
    <mat-card>
        <div class="items-actions">
            <button [routerLink]="['/dashboard', 'categories', 'add']"
                mat-flat-button
                class="icon-button"
                color="primary"
                type="submit">
                <mat-icon>add</mat-icon>Add New
            </button>
        </div>

        <form class="table-container ">
            <mat-form-field class="bulk-select">
                <mat-label>Bulk actions</mat-label>
                <mat-select #selAction="ngModel"
                    ngModel
                    name="selAction">
                    <mat-option *ngFor="let action of bulkActions"
                        [value]="action.value">
                        {{action.name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field class="search-container">
                <input matInput
                    placeholder="Search categories"
                    name="search"
                    #search>
            </mat-form-field>
            <mat-table [dataSource]="dataSource"
                matSort
                matSortActive="createdAt"
                matSortDirection="asc"
                matSortDisableClear>

                <ng-container matColumnDef="select">
                    <th mat-header-cell
                        *matHeaderCellDef>
                        <mat-checkbox (change)="$event ? masterToggle() : null"
                            [checked]="selection.hasValue() && isAllSelected()"
                            [indeterminate]="selection.hasValue() && !isAllSelected()">
                        </mat-checkbox>
                    </th>
                    <td mat-cell
                        *matCellDef="let row">
                        <mat-checkbox (click)="$event.stopPropagation()"
                            (change)="$event ? selection.toggle(row) : null"
                            [checked]="selection.isSelected(row)">
                        </mat-checkbox>
                    </td>
                </ng-container>
                <ng-container matColumnDef="name">
                    <mat-header-cell *matHeaderCellDef
                        mat-sort-header>Name</mat-header-cell>
                    <mat-cell *matCellDef="let product">{{product.name}}</mat-cell>
                </ng-container>
                <ng-container matColumnDef="createdAt">
                    <mat-header-cell *matHeaderCellDef
                        mat-sort-header>Date</mat-header-cell>
                    <mat-cell *matCellDef="let product">
                        {{product.createdAt | date: 'd MMM yyyy HH:mm'}}
                    </mat-cell>
                </ng-container>

                <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>

                <mat-row class="ripple "
                    *matRowDef="let row; columns: displayedColumns"
                    [routerLink]="['/dashboard', 'categories', 'edit', row._id]"
                    matRipple></mat-row>

            </mat-table>
        </form>
        <div class="spinner-container"
            *ngIf="dataSource.loading$ | async">
            <mat-spinner></mat-spinner>
        </div>

        <mat-paginator class=""
            [length]="dataSource.totalItems"
            [pageSize]="itemsQuery.limit"
            [pageSizeOptions]="[3, 5, 10]"></mat-paginator>
    </mat-card>
</app-layout>